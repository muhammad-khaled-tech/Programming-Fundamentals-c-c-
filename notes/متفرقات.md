
## Topic: Call by Value vs. Call by Reference

### 1. The Problem: Call by Value (ูุณุฎุฉ ุทุจู ุงูุฃุตู)

ูู ุงูู C/C++ุ ุงููุถุน ุงูุงูุชุฑุงุถู ููุง ุชุจุนุช ูุชุบูุฑ ููุงููุดูุ ุฅูู ุจุชุจุนุช **ูุณุฎุฉ (Copy)** ูููุ ูุด ูู ุดุฎุตูุงู.

- **ุงููู ุจูุญุตู ูู ุงูููููุฑู:** ุงูู Function ุงูุฌุฏูุฏุฉ ุจุชุนูู [[Stack Frame]] ุฎุงุต ุจููุงุ ูุจุชุงุฎุฏ ูุณุฎุฉ ูู ุงูููู ุชุญุทูุง ุนูุฏูุง.
    
- **ุงููุชูุฌุฉ:** ุฃู ุชุบููุฑ ุจูุญุตู ุฌูู ุงููุงููุดูุ ุจูุญุตู ูู "ุงููุณุฎุฉ"ุ ูุงูุฃุตู (ุงููู ูู main) ุฒู ูุง ูู ูุง ุจูุชุญุฑูุด.
    

**ุงููุซุงู ุงูุดููุฑ (The Failed Swap):**



```C++
void tryToSwap(int a, int b) {
    int temp = a;
    a = b;
    b = temp;
    // ููุง a ู b ุงุชุจุฏููุง ูุนูุงู.. ุจุณ ุฏู ูุณุฎ ูุญููุฉ (Local Copies) ุฌูู ุงููุงููุดู ุฏู ุจุณ
}

int main() {
    int x = 10, y = 20;
    tryToSwap(x, y);
    // x ู y ูุณู ุฒู ูุง ููุง (10 ู 20)
    // ุงููุงููุดู ุงุดุชุบูุช ุนูู ูุฑู ุชุตููุฑ ูุฑูุชูุ ููููุณุชุด ุงููุณุชูุฏ ุงูุฃุตูู
}
```

---

### 2. The Solution: Call by Reference (ูุนุงู ููุชุงุญ ุดูุชู) ๐

ุนุดุงู ุงููุงููุดู ุชูุฏุฑ ุชุบูุฑ ูู ุงููุชุบูุฑุงุช ุงูุฃุตููุฉ ุงููู ูู mainุ ูุงุฒู ููุบู ููุฑุฉ ุงููุณุฎ.

ุจุฏู ูุง ุฃุจุนุชูู "ุตูุฑุฉ" ูู ุงููููุณุ ุฃูุง ูุจุนุชูู "ุนููุงู ุงูุจูู" (Address).

- **ุงููุฑุณู (Main):** ุจูุจุนุช ุงูุนููุงู ุจุงุณุชุฎุฏุงู `&`.
    
- **ุงููุณุชูุจู (Function):** ุจูุณุชูุจู ุงูุนููุงู ูู ูุคุดุฑ `*`.
    
- **ุงูุชูููุฐ:** ุงููุงููุดู ุจุชุณุชุฎุฏู `*ptr` (Dereferencing) ุนุดุงู ุชุนุฏู ูู ุงูููุงู ุงูุฃุตูู.
    

**ููุฏ ุงูู Swap ุงููุงุฌุญ (The Engineering Way):**



```c
// 1. ุงููุณุชูุจู: ุจูุทูุจ ุนูุงููู (Pointers) ูุด ููู
void realSwap(int* ptrA, int* ptrB) {
    // ptrA ุดุงูู ุนููุงู x
    // ptrB ุดุงูู ุนููุงู y
    
    int temp = *ptrA; // ูุงุช ุงููููุฉ ุงููู ุฌูู ุนููุงู x ูุญุทูุง ูู temp
    *ptrA = *ptrB;    // ูุงุช ุงููููุฉ ุงููู ุฌูู y ูุญุทูุง ุฌูู ุนููุงู x
    *ptrB = temp;     // ุญุท ูููุฉ temp ุฌูู ุนููุงู y
}

int main() {
    int x = 10, y = 20;
    
    // 2. ุงููุฑุณู: ุจูุจุนุช ุงูุนูุงููู
    realSwap(&x, &y); 
    
    // x ุจูุช 20ุ ู y ุจูุช 10 -> ุงูุณุญุฑ ุญุตู!
}
```

### 3. Visualizing the Stack (ุชุญุช ุงููุจูุช)

ุนุดุงู ุชุชุฎูู ุงููุฑู ุงูุฑููุจ ูู ุงูููููุฑู:



```mermaid
graph TD
    subgraph "Main Stack Frame"
        X[x: 10]
        Y[y: 20]
    end

    subgraph "Function Stack Frame (Call by Value)"
        A[a: 10] --Change--> A2[a: 20]
        B[b: 20] --Change--> B2[b: 10]
        Note1[No Link to Main!]
    end

    subgraph "Function Stack Frame (Call by Reference)"
        PA[ptrA: 0x100] --Points to--> X
        PB[ptrB: 0x104] --Points to--> Y
        Note2[Access via Arrows!]
    end

    style Note1 fill:#f9f,stroke:#333
    style Note2 fill:#9f9,stroke:#333
```

> [!TIP] Mina's Rule
> 
> - ุนุงูุฒ ุงููุงููุดู **ุชูุฑุฃ ุจุณ**ุ ุงุจุนุช **Value** (ุนุดุงู ุงูุฃูุงู).
>     
> - ุนุงูุฒ ุงููุงููุดู **ุชุบูุฑ ูุชุนุฏู**ุ ุงุจุนุช **Address** (ุนุดุงู ุงูุชุญูู).
>     
> - ุงูุจูุงูุงุช ุญุฌููุง ูุจูุฑ (ุฒู ุตูุฑุฉ ุฃู ูุตูููุฉ)ุ ุงุจุนุช **Address** (ุนุดุงู ุชููุฑ ููุช ุงููุณุฎ ููุณุงุญุฉ ุงูููููุฑู).
>     

---

### 4. ุจููุต C++ (The Reference Variable `&`) ๐

ุจูุง ุฅููุง ุจููุชุจ C++ุ ุงููุบุฉ ุนููุช ุญุฑูุฉ "ุดูุงูุฉ" ุนุดุงู ุชุฑูุญู ูู ูุฌุน ุฏูุงุบ ุงููุฌูุฉ `*` ูุงูุนูุงูุฉ `&`. ุญุงุฌุฉ ุงุณููุง **Reference**.

ุงูู Reference ูู "ุฏูุน" ูููุชุบูุฑ (Alias). ูู ูุด ูุคุดุฑุ ูู ุงุณู ุชุงูู ูููุณ ุงูููุงู ูู ุงูููููุฑู.



```c
void cppSwap(int &a, int &b) { // ูุงุญุธ ุงูุนูุงูุฉ & ููุง ูู ุงูุชุนุฑูู
    // ุงูุชุนุงูู ุฌูู ูุฃููู int ุนุงุฏูุ ุจุณ ููุง ูุฑุจูุทูู ุจุงูุฃุตู
    int temp = a;
    a = b;
    b = temp;
}

int main() {
    int x = 10, y = 20;
    cppSwap(x, y); // ููุง & ููุง ูุญุฒูููุ ุงุจุนุช ุงูุงุณู ุนูุทูู
}
```

- **ูู ุงูู C (ุดุบููุง ุงูุฃุณุงุณู):** ูุงุฒู Pointers.
    
- **ูู ุงูู C++ (ุงูุดุบู ุงูุญุฏูุซ):** ุจููุถู ุงูู References ูุฃู ุดูู ุงูููุฏ ุฃูุถูุ ุจุณ "ุชุญุช ุงููุจูุช" ูู ุจุชุชุญูู ูู Pointers ุจุฑุถู!
    
---
ุญูู ุนููุง ูุง ููุฏุณุฉุ ุฏู ูุนูุงู ุฃูุชุฑ ุญุชุฉ "ุจุชุนุตุฑ ุงูุฏูุงุบ" ูู ุงูููุฑุณุ ูุนุดุงู ูุฏุฉ ูุงุฒู "ูุฑุณููุง" ุนุดุงู ุชุชุฎูููุง.

ุงููุดููุฉ ูููุง ูู ุฌููุฉ ูุงุญุฏุฉ: "ุงููุคุดุฑ ูู ููุงู ูุชุบูุฑ (Variable)".

ูููุง ุจุชุจุนุช ูุชุบูุฑ ููุงููุดูุ ุจูุชุจุนุช ูุณุฎุฉ ููู (Copy).

ุชุนุงูู ูุชุฎูููุง ุจุชูุซูููุฉ ุตุบูุฑุฉ:

### ุงููุดูุฏ ุงูุฃูู: ุงูุณููุงุฑูู ุงูุบูุท (ุงููุณุฎุฉ ุงููุฒููุฉ) โ

ุชุฎูู ุฅูู (ุงูุฏุงูุฉ `main`) ูุนุงู **ูุฑูุฉ ูุงุถูุฉ** (ุงููุคุดุฑ `ptr`) ูุนุงูุฒ ูููุฏุณ ุงูุฏูููุฑ (ุงูุฏุงูุฉ `Allocation`) ููุชุจูู ูููุง ุนููุงู ุดูุชู ุงูุฌุฏูุฏุฉ.

1. ุฃูุช ูุงุฏูุช ุงููููุฏุณ ูุงุฏูุชูู **"ุตูุฑุฉ ุถูุฆูุฉ"** ูู ุงููุฑูุฉ ุจุชุงุนุชู (`Call by Value`).
    
2. ุงููููุฏุณ ูุณู "ุงูุตูุฑุฉ"ุ ููุชุจ ูููุง ุนููุงู ุงูุดูุฉ ุงูุฌุฏูุฏุฉ (`0x900`).
    
3. ุงููููุฏุณ ุฎูุต ุดุบูู ููุดู ูุฑูู ุงูุตูุฑุฉ ูู ุงูุฒุจุงูุฉ (ุงููุงููุดู ุฎูุตุช).
    
4. ุฃูุช ุจุตูุช ูู **ูุฑูุชู ุงูุฃุตููุฉ**.. ูููุชูุง ูุณู ูุงุถูุฉ (`NULL`)!
    

**ุฏู ุงููู ุจูุญุตู ูู ุงูููุฏ ุฏู:**

C++

```c
void badAllocation(int *p) { 
    // p ููุง ูู "ุงูุตูุฑุฉ ุงูุถูุฆูุฉ" (ูุณุฎุฉ ุฌุฏูุฏุฉ ูู ุงูู Stack)
    p = new int(50); 
    // ุงูุตูุฑุฉ ุจูุช ุจุชุดุงูุฑ ุนูู ุงูููููุฑู ุงูุฌุฏูุฏุฉ.. ูุงูุฃุตู ููุง ุฏุฑูุงู
}

int main() {
    int *myPtr = NULL; // ุงููุฑูุฉ ุงูุฃุตููุฉ
    badAllocation(myPtr); // ุจุนุช ุตูุฑุฉ ูููุง
    // myPtr ูุณู ุจู NULL -> ูุงูุดูุฉ ุงูุฌุฏูุฏุฉ ุถุงุนุช (Memory Leak)
}
```

---

### ุงููุดูุฏ ุงูุซุงูู: ุงูุณููุงุฑูู ุงูุตุญ (ุฃูุง ููููู ูุฑูุชู ููู) โ

ููุง ุฅุญูุง ููุณุชุฎุฏู **Double Pointer** (`**pp`).

1. ุฃูุช (ุงูุฏุงูุฉ `main`) ูุนุงู **ุงููุฑูุฉ ุงููุงุถูุฉ** (`ptr`).
    
2. ุฃูุช ุงููุฑุฉ ุฏู ูุด ูุชุฏููู ุงููุฑูุฉ.. ุฃูุช ูุชุฏููู **"ุนููุงู ุฌูุจู"** ุงููู ููู ุงููุฑูุฉ (`&ptr`).
    
3. ุงููููุฏุณ (ุงูุฏุงูุฉ `goodAllocation`) ุจูุงุฎุฏ ุงูุนููุงู ุฏู ููุณููู `pp`.
    
4. ุงููููุฏุณ ุจููุฏ ุฅูุฏู ูู ุฌูุจู (`*pp`)ุ ููุทูุน ูุฑูุชู ุงูุฃุตููุฉุ ูููุชุจ ูููุง ุงูุนููุงู ุงูุฌุฏูุฏ.
    
5. ุงููููุฏุณ ูุดู.
    
6. ุฃูุช ุจุชุทูุน ุงููุฑูุฉ ูู ุฌูุจู.. ูููุช ุงูุนููุงู ููุชูุจ ูููุง!
    

**ุฏู ุงููู ุจูุญุตู ููุง:**

C++

```c
void goodAllocation(int **pp) {
    // pp: ุนููุงู ุฌูุจู (Pointer to Pointer)
    // *pp: ุงููุฑูุฉ ุงููู ุฌูู ุฌูุจู (The Original Pointer)
    
    *pp = new int(50); 
    // ุฃูุง ููุง ุจูุชุจ ุนูู ุงููุฑูุฉ ุงูุฃุตููุฉ ูุจุงุดุฑุฉ
}

int main() {
    int *myPtr = NULL;
    goodAllocation(&myPtr); // ุฎุฏ ุนููุงู ุฌูุจู (ุนููุงู ุงููุคุดุฑ)
    // myPtr ุฏูููุชู ุดุงูู ุนููุงู ุงูุดูุฉ ุงูุฌุฏูุฏุฉ
}
```

---

### ุงูุฑุณูุฉ ุงููู ูุชูู ุงููุบุฒ (The Memory Diagram) ๐ง

ุชุนุงูู ูุดูู ุงูุฃุณูู ูุงุดูุฉ ุฅุฒุงู ูู ุงูุญุงูุชูู:

#### 1. ุงูุทุฑููุฉ ุงููุงุดูุฉ (ูุทุน ุงูุงุชุตุงู)

Code snippet

```mermaid
graph TD
    subgraph "Main Stack"
        OriginalPTR[myPtr: NULL]
    end
    
    subgraph "Function Stack (Bad)"
        CopyPTR[p: 0x999] -->|Points to| NewMem[New Memory Block]
    end
    
    OriginalPTR -.-x|No Connection| CopyPTR
    style CopyPTR fill:#f9f,stroke:#333
    style NewMem fill:#f00,stroke:#333
```

_ูุงุญุธ ุฅู `OriginalPTR` ูุณู ุจู NULL ูููุนุฑูุด ุญุงุฌุฉ ุนู `New Memory`._

#### 2. ุงูุทุฑููุฉ ุงููุงุฌุญุฉ (ุงูููุจุฑู) ๐

Code snippet

```mermaid
graph TD
    subgraph "Main Stack"
        OriginalPTR[myPtr: 0x999] -->|Points to| NewMem[New Memory Block]
    end
    
    subgraph "Function Stack (Good)"
        PP[pp: Address of myPtr] -->|Points to| OriginalPTR
    end
    
    %% pp reaches OriginalPTR via *pp
    style PP fill:#bfb,stroke:#333
    style OriginalPTR fill:#bbf,stroke:#333
```

_ูุงุญุธ ุงูุณูู ุงููู ุทุงูุน ูู `pp` ุฑุงูุญ ูู `myPtr`. ุงููุงููุดู ุงุณุชุฎุฏูุช ุงูุณูู ุฏู ุนุดุงู ุชุบูุฑ ูููุฉ `myPtr` ูุชุฎููู ูุดุงูุฑ ุนูู ุงูููููุฑู ุงูุฌุฏูุฏุฉ._

### ุงูุฎูุงุตุฉ (ุนุดุงู ุชุซุจุช):

- ูู ุนุงูุฒ ุชุบูุฑ **ุงููููุฉ** (`x`): ุงุจุนุช ุนููุงููุง (`int *`).
    
- ูู ุนุงูุฒ ุชุบูุฑ **ุงูุนููุงู** (`ptr`): ุงุจุนุช ุนููุงู ุงูุนููุงู (`int **`).
    

ูุง ูุง ููุฏุณุฉ.. ุงูุตูุฑุฉ ูุถุญุช ุดููุฉ ููุง ูุณู ูููุง "ุบุจุงุฑ"ุ
