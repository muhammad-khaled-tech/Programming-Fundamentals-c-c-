ุฌูุนุชูู ููุง "ุงูุฏุณุชูุฑ ุงูุดุงูู ููู OOP" ๐.


---

# ๐ Pro Tips & Tricks for C++ OOP

> [!TIP] ุงููุงุนุฏุฉ ุฑูู 0: ุญุฏุฏ ููุงูู
> 
> ูุจู ูุง ุชุญู ุฃู ุณุคุงูุ ุงุณุฃู ููุณู: ูู ุฃูุง ูู ูุฑุญูุฉ Compile-time (ุงููุชุฑุฌู ูู ุงููู ุจููุฑุฑ) ููุง Run-time (ุงูุจุฑูุงูุฌ ูู ุงููู ุจููุฑุฑ)ุ

---

## 1. ุฎุฏุนุฉ ุงูู "Slicing" (ุงููุต) ๐ช


### 1. ุฎุฏุนุฉ ุงูู "Slicing" (ุงููุต) ๐ช

**ุงูุณููุงุฑูู:** ุนูุฏู ุฏุงูุฉ ุจุชุงุฎุฏ `Parent`ุ ูุฃูุช ุจุนุชููุง `Child`.

- **ูู ุงูุฏุงูุฉ ุจุชุงุฎุฏ (Value):** ุงููููุจุงููุฑ "ูููุต" ุงูุฒูุงุฏุงุช ุจุชุงุนุฉ ุงูุงุจูุ ููุญููู ูุฃุจ ุนุงุฏู. (ุงูู Polymorphism ุจูููุช).
    
- **ูู ุงูุฏุงูุฉ ุจุชุงุฎุฏ (Reference/Pointer):** ุงูู Polymorphism ุจูุนูุด.
    

**ุงูููุฏ:**



```C++
#include <iostream>
using namespace std;

class Base {
public:
    int x = 10;
    virtual void print() { cout << "I am Base (x=" << x << ")\n"; }
};

class Derived : public Base {
public:
    int y = 20; // ุฒูุงุฏุฉ ุนู ุงูุฃุจ
    void print() override { cout << "I am Derived (x=" << x << ", y=" << y << ")\n"; }
};

// 1. ุฏุงูุฉ ุจุชุนูู Slicing (ูุงุฑุซุฉ)
// ุจุชุณุชูุจู ูุณุฎุฉ (Value)
void badFunc(Base b) {
    b.print(); 

}

// 2. ุฏุงูุฉ ุณูููุฉ (Polymorphic)
// ุจุชุณุชูุจู ูุฑุฌุน (Reference)
void goodFunc(Base &b) {
    b.print();
}

int main() {
    Derived d;
    
    cout << "--- Bad Function (Slicing) ---\n";
    badFunc(d); // Output: I am Base... (ูุต ุงูุงุจู ูุญููู ูุฃุจ ุบุตุจ ุนูู)
    
    cout << "\n--- Good Function (No Slicing) ---\n";
    goodFunc(d); // Output: I am Derived... (ุงุดุชุบูุช ุตุญ)

    return 0;
}
```

        

---

## 2. ูุบุฒ ุญุฌู ุงูููุงุณ (`sizeof`) ๐

ููุง ูุฌููู ุณุคุงู `sizeof(MyClass)`ุ ุงุญุณุจูุง ูุฏู:

1. **ูู ุงูููุงุณ ูุงุถู ุชูุงูุงู:** ุงูุญุฌู = **1 Byte** (ุนุดุงู ูููู ููู ุนููุงู ูููุฒ).
    
2. **ูู ููู `virtual function` (ูุงุญุฏุฉ ุฃู ุฃูุชุฑ):** ุฒูุฏ ุญุฌู ูุคุดุฑ (`4 bytes` ูู 32-bit ุฃู `8 bytes` ูู 64-bit). ุฏู ุงุณูู `vptr`.
    
3. **ูู ููู ูุฑุงุซุฉ:** ุญุฌู ุงูุฃุจ + ุญุฌู ุงูุงุจู.
    
4. **ุงูู Alignment (ุงูุญุดู):** ุงููููุจุงููุฑ ุจูุญุจ ุงูุฃุฑูุงู ุงูุฒูุฌูุฉ (ูุถุงุนูุงุช 4 ุฃู 8). ูู ุนูุฏู `char` (1 ุจุงูุช) ูุฑุงู `int` (4 ุจุงูุช)ุ ุงููููุจุงููุฑ ููุฒูุฏ 3 ุจุงูุช ุญุดู (Padding) ุนุดุงู ูุธุจุทูู.
    

> [!EXAMPLE] ูุซุงู ุณุฑูุน:
> 
> class A { char c; virtual void f(); };
> 
> - ุงูุญุณุงุจ: 1 (char) + 3 (padding) + 4 (vptr) = **8 bytes**.
>     

---

## 3. ูุงุฆูุฉ ุงูู Initialization List (ุงูุฅุฌุจุงุฑู) ๐

ุงูุชู ูุงุฒู ุชุณุชุฎุฏู ุงูู Initializer List : x(val) ูููููุนุด ุชุนูู Assignment ุฌูู ุงูู Constructor { x = val; }ุ

ูู ุงููุชุบูุฑ ููุนู ุญุงุฌุฉ ูู ุฏููุ ุงููููุจุงููุฑ ููุถุฑุจ Error ูู ููุชุจุชูุงุด ูู ุงููุงุฆูุฉ ููู:

1. **Reference:** `int &r;` (ูุงุฒู ูุชุฑุจุท ุจุญุงุฌุฉ ููุฑุงู).
    
2. **Const:** `const int c;` (ูุงุฒู ูุงุฎุฏ ูููุฉ ููุฑุงู ูููููุนุด ูุชุนุฏู ุจุนุฏูู).
    
3. **No Default Constructor:**
4. ูู ุนูุฏู ุฃูุจุฌููุช ุฌูู ุงูููุงุณุ ูุงูููุงุณ ุจุชุงุนู ูููููุด Constructor ูุงุถู.



```C++
#include <iostream>
using namespace std;

class Engine {
    int hp;
public:
    // ููุงุณ ุฑุฎู: ูููููุด Default Constructor
    // ูุงุฒู ุชุฏููู ููุฉ ุงูููุชูุฑ ูุงูุช ุจุชุจููู
    Engine(int power) : hp(power) {} 
};

class Car {
    const int id;      // 1. Const (ูุงุฒู ูุงุฎุฏ ูููุฉ ููุฑุงู)
    int &ref;          // 2. Reference (ูุงุฒู ูุชุฑุจุท ููุฑุงู)
    Engine eng;        // 3. Object no default constructor

public:
    // --- ุงูุทุฑููุฉ ุงูุบูุท (Compiler Error) โ ---
    /*
    Car(int i, int &r, int p) {
        id = i;      // Error: Assignment to const variable
        ref = r;     // Error: Uninitialized reference
        eng = p;     // Error: No default constructor for 'eng' to start with
    }
    */

    // --- ุงูุทุฑููุฉ ุงูุตุญ (Member Initializer List) โ ---
    // ุจูุฑูู ุงูููู ูููุชุบูุฑุงุช ูุจู ูุง ุฌุณู ุงูุฏุงูุฉ ูุจุฏุฃ
    Car(int i, int &r, int p) 
        : id(i), ref(r), eng(p) 
    {
        cout << "Car Created Successfully!\n";
    }
    
    void print() { cout << "ID: " << id << ", Ref: " << ref << endl; }
};

int main() {
    int x = 100;
    Car myCar(1, x, 200); // 1->id, x->ref, 200->engine
    myCar.print();
    return 0;
}
```

### ุงูุฒุชููุฉ:

- **Slicing:** ุจูุญุตู ููุง ุชูุณู `&` ุฃู `*` ูู ุงูุจุงุฑุงููุชุฑ.
    
- **Initializer List:** ุถุฑูุฑูุฉ ููุง ุงููุชุบูุฑ ูููู "ุจูุดุชุฑุท" ูุงุฎุฏ ูููุชู ูุญุธุฉ ูููุงุฏู (ุฒู ุงูู Const ูุงูู Reference).

---

## 4. ุชุฑููุฉ ุงูู Operators (= ู Copy) ๐

- **ูุงุนุฏุฉ ุงูู Big Three:** ูู ุงูููุงุณ ุจุชุงุนู ููู `Pointer` ูุจุชุนูู `new` ูู ุงูู Constructor:
    
    - ูุงุฒู ุชุนูู **Destructor** (ุนุดุงู `delete`).
        
    - ูุงุฒู ุชุนูู **Copy Constructor** (Deep Copy).
        
    - ูุงุฒู ุชุนูู **Copy Assignment Operator** (Deep Copy).
        
- **ูููุ** ุนุดุงู ูู ูุนููุชุด ูุฏูุ ุงููุณุฎ ุงูุงูุชุฑุงุถู (Shallow Copy) ููุฎูู ุงุชููู ุฃูุจุฌููุช ูุดุงูุฑูุง ุนูู ููุณ ุงูููุงู ูู ุงูููููุฑู. ููุง ูุงุญุฏ ูุชูุณุญุ ุงูุชุงูู ููุนูู Crash (Double Free Error).
    

---

## 5. ููู ุจููุงุฏู ูููุ (Constructor/Destructor Order) ๐๏ธ

ุชุฎูููุง ุฒู "ุจูุงุก ุนูุงุฑุฉ":

- **ุงูุจูุงุก (Constructor):** ุจูุจุฏุง ูู ุงูุฃุณุงุณ (Base) ููุทูุน ููุฏูุฑ ุงูุฃุฎูุฑ (Derived).
    
    - ูู ููู ููุงุณุงุช ุชุงููุฉ ุฌูู ุงูููุงุณ (Member Objects)ุ ุจูุชุจููุง **ูุจู** ูุง ููุฏ ุงูู Constructor ุจุชุงุน ุงูููุงุณ ููุณู ูุดุชุบู.
        
- **ุงููุฏู (Destructor):** ุงูุนูุณ! ุจููุฏ ุงูุฏูุฑ ุงูุฃุฎูุฑ (Derived) ุงูุฃููุ ูููุฒู ููุฃุณุงุณ (Base).
    

> [!NOTE] ูุตูุญุฉ ุชุชุจุน:
> 
> ุงูุชุจ ุงููุฎุฑุฌุงุช ูู ุณุทุฑ ูุงุญุฏ ูุงูุช ูุงุดู: Base -> Member -> Derived. ููู ุงููุฏู ุงุนูุณูู.

---

## 6. ุงููุฑู ุจูู `malloc` ู `new` (ุณุคุงู ุฅูุชุฑููู) ๐ก

| **ุงูููุฒุฉ**      | **new / delete**                  | **malloc / free**                 |
| --------------- | --------------------------------- | --------------------------------- |
| **ุงูููุน**       | Operator (C++)                    | Function (C)                      |
| **Constructor** | โ ุจููุงุฏู ุงูู Constructor          | โ ุจูุญุฌุฒ ููููุฑู ุจุณ (ุบุจู)           |
| **ุงูุญุฌู**       | ุจูุญุณุจู ููุญุฏู (`sizeof` ุฃูุชููุงุชูู) | ูุงุฒู ุชุฏููู ุงูุญุฌู ุจุงูุจุงูุช          |
| **ุงูุฑุฌูุน**      | ุจูุฑุฌุน ูุคุดุฑ ูู ุงูููุน ุงูุตุญ          | ุจูุฑุฌุน `void*` ููุงุฒู ุชุนููู Casting |

---

## 7. ุฅุฒุงู ุชูุฑุฃ ุงูู Pointers ุงููุนูุฏุฉุ (ูุงุนุฏุฉ ุงูุญูุฒููุฉ ๐)

ูู ุฌุงูู ุชุนุฑูู ูุนูุฏ ุฒู: int *(*x[10])(int);

ุงูุฑุฃ ูู ุนูุฏ ุงูุงุณู x ูุงุทูุน ูุจุฑู ุญุณุจ ุงูุฃููููุฉ:

1. `x[10]`: ูุตูููุฉ ุญุฌููุง 10.
    
2. `*`: ูุตูููุฉ ูุคุดุฑุงุช.
    
3. `(int)`: ูุคุดุฑุงุช ูุฏูุงู ุจุชุงุฎุฏ int.
    
4. `*`: ุงูุฏูุงู ุฏู ุจุชุฑุฌุน ูุคุดุฑ.
    
5. int: ุงููุคุดุฑ ุงููู ุฑุงุฌุน ุฏู ูููุน int.
    
    ุงููุชูุฌุฉ: ูุตูููุฉ ูุคุดุฑุงุช ูุฏูุงูุ ุจุชุฑุฌุน ูุคุดุฑุงุช ูุฃุนุฏุงุฏ ุตุญูุญุฉ. (ูุชูููุด ุฏู ูููุญูุด ุจุณ ๐).
    

---

### ๐ก ูุตูุญุฉ ุฃุฎูุฑุฉ ููุงูุชุญุงู:

ูู ุฃุณุฆูุฉ ุงูู **Output Tracing**ุ ูู ูููุช ููุฏ ููู `virtual`ุ ุงุฑุณู ุฌุฏูู ุตุบูุฑ ุฌูุจู (vtable) ูุงูุชุจ ููู ูู ุฏุงูุฉ ุจุชุดุงูุฑ ุนูู ููู (ุงูุฃุจ ููุง ุงูุงุจู). ุงูุฑุณู ุจูููุฑ ูุต ุงูููุช ูุจูููุน ุงููุฎุจุทุฉ.

ูุง ูุง ููุฏุณุฉุ ุญุงุณุณ ุฅูู ุจููุช ูุณูุญ ุฃูุชุฑ ุฏูููุชูุ ๐ช

---

# ๐๏ธ The Ultimate C++ OOP Cheat Sheet

## 1. ูุงุนุฏุฉ ุงููููุงุฏ ูุงูููุช (Life Cycle) ๐ถ๐

> [!abstract] **ุงููุงุนุฏุฉ**
> 
> - **ุงูุจูุงุก (Construction):** ุจูุจูู ุงูุฃุณุงุณ ุงูุฃููุ ุซู ุงูุฏูุฑ ุงููู ูููู (**Base $\rightarrow$ Derived**).
>     
> - **ุงููุฏู (Destruction):** ุจููุฏ ุงูุฏูุฑ ุงูุฃุฎูุฑ ุงูุฃููุ ุซู ุงูุฃุณุงุณ (**Derived $\rightarrow$ Base**).
>     
> - **ููุญูุธุฉ:** ุงููุชุบูุฑุงุช (Members) ุจุชุชุฎูู ูุจู ูุง ููุฏ ุงููููุณุชุฑูุชูุฑ ูุชููุฐ.
>     

**๐ป ุงูููุฏ:**



```C++
#include <iostream>
using namespace std;

class Base {
public:
    Base() { cout << "1. Base Created (Foundation)\n"; }
    ~Base() { cout << "4. Base Destroyed\n"; }
};

class Derived : public Base {
public:
    Derived() { cout << "2. Derived Created (Upper Floor)\n"; }
    ~Derived() { cout << "3. Derived Destroyed\n"; }
};

int main() {
    {
        Derived d; 
    } // ููุง ุงูู Scope ุฎูุตุ ูุงููุฏู ููุจุฏุฃ ุจุงูุนูุณ
    return 0;
}
```

---

## 2. ูุงุนุฏุฉ ุงูู Binding (Virtual vs Normal) ๐

> [!TIP] **ุงููุงุนุฏุฉ**
> 
> - **ุฏุงูุฉ ุนุงุฏูุฉ (Non-Virtual):** ุงููููุจุงููุฑ ุฃุนูู! ุจูุจุต ุนูู **ููุน ุงููุคุดุฑ** (`Base*`) ููููุฐ ุฏุงูุฉ ุงูุฃุจ. (Static Binding).
>     
> - **ุฏุงูุฉ ููููุฉ (Virtual):** ุงููููุจุงููุฑ ูุงุตุญ! ุจูุจุต ุนูู **ููุน ุงูุฃูุจุฌููุช ุงูุญูููู** (`Derived`) ููููุฐ ุฏุงูุฉ ุงูุงุจู. (Dynamic Binding).
>     

**๐ป ุงูููุฏ:**



```C++
#include <iostream>
using namespace std;

class Base {
public:
    void normalFunc() { cout << "Base Normal (Pointer Type)\n"; }
    virtual void virtualFunc() { cout << "Base Virtual\n"; }
};

class Derived : public Base {
public:
    void normalFunc() { cout << "Derived Normal\n"; }
    void virtualFunc() override { cout << "Derived Virtual (Object Type)\n"; }
};

int main() {
    Base* ptr = new Derived(); // ูุคุดุฑ ุฃุจ ุจูุดุงูุฑ ุนูู ุงุจู

    ptr->normalFunc();   // ููุทุจุน Base (ูุฃููุง ูุด virtual)
    ptr->virtualFunc();  // ููุทุจุน Derived (ูุฃููุง virtual)

    delete ptr;
    return 0;
}
```

---

## 3. ูุงุนุฏุฉ ุงูู Virtual Destructor (ุงูุฃูุงู) ๐ก๏ธ

> [!DANGER] ุงููุงุนุฏุฉ
> 
> "ุฃู ููุงุณ ููู ุฏุงูุฉ Virtualุ ูุงุฒู ุงูู Destructor ุจุชุงุนู ูููู Virtual".
> 
> ูู ูุนููุชุด ูุฏูุ ููุง ุชูุณุญ ุงููุคุดุฑ (delete ptr)ุ ูููุณุญ ุงูุฃุจ ุจุณ ููุณูุจ ุงูุงุจู ูู ุงูููููุฑู (Memory Leak).

**๐ป ุงูููุฏ:**



```C++
class DangerousBase {
public:
    ~DangerousBase() { cout << "Base Only Deleted! (Leak)\n"; } 
};

class SafeBase {
public:
    virtual ~SafeBase() { cout << "Base Deleted\n"; } 
};

class Derived : public SafeBase {
public:
    ~Derived() { cout << "Derived Deleted First (Clean!)\n"; }
};

int main() {
    SafeBase* ptr = new Derived();
    delete ptr; 
    // ุงููุชูุฌุฉ ุงูุตุญ: Derived Deleted -> Base Deleted
    return 0;
}
```

---

## 4. ูุงุนุฏุฉ ุงูู Hiding (ุฎุฏุนุฉ ุงูุฃุณูุงุก) ๐

> [!WARNING] ุงููุงุนุฏุฉ
> 
> ูู ุนุฑูุช ุฏุงูุฉ ูู ุงูุงุจู ุจููุณ ุงุณู ุฏุงูุฉ ูู ุงูุฃุจ (ููุด virtual)ุ ุงูุงุจู ุจูุฎูู ูู ุฏูุงู ุงูุฃุจ ุงููู ุจููุณ ุงูุงุณู (ุญุชู ูู ุงูู Parameters ูุฎุชููุฉ).

**๐ป ุงูููุฏ:**



```C++
class Base {
public:
    void func() { cout << "Base func()\n"; }
    void func(int x) { cout << "Base func(int)\n"; }
};

class Derived : public Base {
public:
    // Hiding: ุงูุฏุงูุฉ ุฏู ุฎูุช ูู ุฏูุงู func ุงููู ูู ุงูุฃุจ
    void func() { cout << "Derived func()\n"; }
};

int main() {
    Derived d;
    d.func();       // ุดุบุงู
    
    // d.func(10);  // Error! ุงููููุจุงููุฑ ูุด ุดุงูู ุฏุงูุฉ ุงูุฃุจ ุงููู ุจุชุงุฎุฏ int
                    // ูุฃูู ุญุตููุง Hiding.
    
    d.Base::func(10); // ุงูุญู: ูุงุฒู ุชูุงุฏููุง ูุฏู
    return 0;
}
```

---

## 5. ูุงุนุฏุฉ ุงูู Rule of Three (Deep Copy) ๐

> [!important] ุงููุงุนุฏุฉ
> 
> ูู ุงูููุงุณ ุจุชุงุนู ููู ูุคุดุฑ (pointer) ูุจุชุนูู new ูู ุงููููุณุชุฑูุชูุฑุ ูุงุฒู ุชุนูู ุงูู 3 ุฏูู ุนุดุงู ุชููุน ุชุฏุงุฎู ุงูุฐุงูุฑุฉ:
> 
> 1. **Destructor** (ุนุดุงู `delete`).
>     
> 2. **Copy Constructor** (ุนุดุงู ููุณุฎ ุงููููุฉ ูุด ุงูุนููุงู).
>     
> 3. **Copy Assignment Operator** (ุนุดุงู `a = b`).
>     

**๐ป ุงูููุฏ:**



```C++
class MyClass {
    int* ptr;
public:
    MyClass(int val) { ptr = new int(val); }
    ~MyClass() { delete ptr; } // 1. Destructor

    // 2. Copy Constructor (Deep Copy)
    MyClass(const MyClass& other) {
        ptr = new int(*other.ptr); // ููุงู ุฌุฏูุฏ + ูุณุฎ ุงููููุฉ
    }

    // 3. Assignment Operator
    MyClass& operator=(const MyClass& other) {
        if (this != &other) {
            delete ptr;
            ptr = new int(*other.ptr);
        }
        return *this;
    }
};
```

---

## 6. ุงููุตูุฏุฉ: Default Arguments in Virtual Functions ๐ญ

> [!bug] **ุงููุงุนุฏุฉ**
> 
> - **ุฌุณู ุงูุฏุงูุฉ:** ุจูุชุญุฏุฏ ููุช ุงูุชุดุบูู (Dynamic) $\leftarrow$ ุฏุงูุฉ ุงูุงุจู.
>     
> - **ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ:** ุจุชุชุญุฏุฏ ููุช ุงูุชุฑุฌูุฉ (Static) $\leftarrow$ ูููุฉ ุงูุฃุจ.
>     
> - **ุงููุชูุฌุฉ:** ุฏุงูุฉ ุงูุงุจู ูุชุดุชุบูุ ุจุณ ูุชุงุฎุฏ ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ุจุชุงุนุฉ ุงูุฃุจ!
>     

**๐ป ุงูููุฏ:**



```C++
class Base {
public:
    virtual void func(int x = 10) { cout << "Base: " << x << endl; }
};

class Derived : public Base {
public:
    void func(int x = 20) override { cout << "Derived: " << x << endl; }
};

int main() {
    Base* ptr = new Derived();
    ptr->func(); 
    // Output: "Derived: 10" 
    // (ุงูุฏุงูุฉ ูู ุงูุงุจูุ ูุงูุฑูู ูู ุงูุฃุจ!)
    return 0;
}
```

---

ูููุฉ `static` ุฏู ูุนูุงู "ุงูุญุฑุจุงุก" ุจุชุงุนุฉ C++ุ ูุฃู ูุนูุงูุง ุจูุชุบูุฑ ุชูุงูุงู ุญุณุจ ููุงููุง ูู ุงูููุฏ. ุนุดุงู ูุฏู ุจุชูุฎุจุท ูุงุณ ูุชูุฑ.

ุนุดุงู ุชูุณุฑ ุนูุฏุชูุง ููุฃุจุฏุ ูุณููุง ูู ุฏูุงุบู ูู **3 ุณููุงุฑูููุงุช** ููุท. ูู ุณููุงุฑูู ููู ูุงุนุฏุฉ ุซุงุจุชุฉ ูุด ุจุชุชุบูุฑ.

ุฅููู **"ูุชุงููุฌ ุงูู Static"** ุงูุดุงูู:

---

### 1. ุงูู Static ุฌูู ุฏุงูุฉ (The Immortal Variable) ๐งโโ๏ธ

ููุง ุชูุชุจ `static` ุฌูู ุฏุงูุฉ ุนุงุฏูุฉ.

- **ุงูุณููู:** ุงููุชุบูุฑ ุฏู ุจูุจูู "ููุฎููุฏ". ุจูุชููุฏ ุฃูู ูุฑุฉ ุงูุฏุงูุฉ ุชุชูุฏูุ ูููุถู ูุญุชูุธ ุจูููุชู ุญุชู ููุง ุงูุฏุงูุฉ ุชุฎูุต ูุชุฑุฌุน ุชุงูู.
    
- **ุงูููุงู:** ูุด ุจูุนูุด ูู ุงูู Stack (ุฒู ุงููุชุบูุฑุงุช ุงูุนุงุฏูุฉ ุงููู ุจุชููุช)ุ ุฏู ุจูุนูุด ูู ุงูู **Data Segment**.
    
- **ุงูุชุฑููุฉ ูู ุงูุงูุชุญุงู:** ุณุทุฑ ุงูุชุนุฑูู `static int x = 0;` ุจูุชููุฐ **ูุฑุฉ ูุงุญุฏุฉ ุจุณ** ูู ุนูุฑ ุงูุจุฑูุงูุฌ ููู.
    

**ูุซุงู ุงูุชุชุจุน (Tracing):**

C++

```
void counter() {
    static int count = 0; // ุงูุณุทุฑ ุฏู ูุฃูู ูุด ููุฌูุฏ ุจุนุฏ ุฃูู ูุฑุฉ
    count++;
    cout << count << " ";
}

int main() {
    counter(); // ุทุจุน 1 (count ูุงู 0 ุจูู 1)
    counter(); // ุทุจุน 2 (count ูุณู ูุงูุฑ ุฅูู ูุงู 1)
    counter(); // ุทุจุน 3
}
```

---

### 2. ุงูู Static ุฌูู ุงูููุงุณ (The Shared Property) ๐

ููุง ุชูุชุจ `static` ูู Data Member ุฌูู ููุงุณ.

- **ุงูุณููู:** ุงููุชุบูุฑ ุฏู ูุด ููู ููุฃูุจุฌููุชุ ุฏู **ููู ููููุงุณ ููุณู**.
    
- **ุงูุชุดุจูู:** ุฒู "ุจุงุณูุฑุฏ ุงููุงู ูุงู" ูู ุงููุงููู. ูู ุฒุจูู (Object) ููู ูุดุฑูุจู ุงูุฎุงุตุ ุจุณ ูููู ูุดุชุฑูู ูู ููุณ ุงูุจุงุณูุฑุฏ (Static Variable). ูู ุบูุฑุชูุ ููุชุบูุฑ ุนูุฏ ุงููู.
    
- **ุงูุชุฑููุฉ ุงููุงุชูุฉ:**
    
    1. ูุงุฒู ูุชุนูู ูู **Definition ุจุฑู ุงูููุงุณ** (`int ClassName::var = 0;`) ูุฅูุง ููุฏูู Linker Error.
        
    2. **`sizeof(Object)`** ูููุด ุฏุนูุฉ ุจุงูู static. ุงูู static ูุด ุจูุชุญุณุจ ูู ุญุฌู ุงูุฃูุจุฌููุช ูุฃูู ูู ููุงู ุชุงูู ุฎุงูุต.
        

**ูุซุงู:**

C++

```
class User {
public:
    int id;             // ุนุงุฏู (ูู ููุฒุฑ ููู id)
    static int count;   // ูุดุชุฑู (ุนุฏุงุฏ ููู ุงูููุฒุฑุฒ)
};

int User::count = 0;    // ูุงุฒู ุงูุณุทุฑ ุฏู ุจุฑู!

int main() {
    User u1, u2;
    u1.count = 5;
    cout << u2.count;   // ููุทุจุน 5 (ูุฃูู ููุณ ุงููุชุบูุฑ)
}
```

---

### 3. ุงูู Static Function ุฌูู ุงูููุงุณ (The Isolated Function) ๐๏ธ

ููุง ุฏุงูุฉ ุฌูู ุงูููุงุณ ุชููู `static`.

- **ุงูุณููู:** ุฏู ุฏุงูุฉ "ูุชููุฉ" ูููุงุด ุฃุจ (ูููุงุด `this` pointer).
    
- **ุงูููุฏ:** ุจูุง ุฅู ูููุงุด `this`ุ ููู **ุนููุงุก** ุนู ุฃู ูุชุบูุฑ ุนุงุฏู ุฌูู ุงูููุงุณ.
    
    - ุชูุฏุฑ ุชุดูู ุงูู Static Variables ุจุณ.
        
    - ููุฏุฑุด ุชุดูู ุงูู Normal Variables.
        
- **ุงูููุฒุฉ:** ุชูุฏุฑ ุชูุงุฏููุง ูู ุบูุฑ ูุง ุชุนูู ุฃูุจุฌููุช ุฃุตูุงู (`ClassName::func()`).
    

**ุงูุชุฑููุฉ (ุณุคุงู ุงูุชุญุงู):**

C++

```
class Test {
    int x;
    static int y;
public:
    static void func() {
        y = 10; // ุตุญ (static ูููู static)
        // x = 10; // Error! (ูุนูุฏูุด this ุนุดุงู ุฃุนุฑู x ุจุชุงุนุฉ ููู)
    }
};

int main() {
    Test::func(); // ุจุชุชูุงุฏู ูุฏู
    
    Test *ptr = NULL;
    ptr->func(); // ุชุฑููุฉ! ูุชุดุชุบู ุนุงุฏู ููุด ูุชุนูู Crash ูุฃููุง ูุด ูุญุชุงุฌุฉ this.
}
```

---

### ููุฎุต ุงูููุงุนุฏ ุงูุฐูุจูุฉ ููู Static ๐

|**ุงูุญุงูุฉ**|**ุงูููุงู**|**ุงูุณููู**|**ุชุฑููุฉ ุงูุงูุชุญุงู**|
|---|---|---|---|
|**Local Static**|ุฌูู ุฏุงูุฉ|ูุญุชูุธ ุจูููุชู ุจูู ุงูุงุณุชุฏุนุงุกุงุช.|ุณุทุฑ ุงูุชุนุฑูู ุจูุชููุฐ ูุฑุฉ ูุงุญุฏุฉ.|
|**Static Member**|ุฌูู ููุงุณ|ูุชุบูุฑ ูุงุญุฏ ูุดุชุฑู ุจูู ูู ุงููุณุฎ.|ูุง ููุญุณุจ ุถูู `sizeof` ููุงุฒู ูุชุนุฑู ุจุฑู.|
|**Static Function**|ุฌูู ููุงุณ|ุฏุงูุฉ ุจุชุดุชุบู ุจุฏูู ุฃูุจุฌููุช.|ูููุงุด `this` ููุจุชุดููุด ุบูุฑ ุงูู static.|

---

### ุณุคุงู ุณุฑูุน ูุซุจุช ุงููุนูููุฉ ๐ง

**ูู ูููุช ุงููู ูููุ ุฌุงูุจ ุงูุณุคุงู ุฏู:**

C++

```
class A {
    static int x;
public:
    void set(int v) { x = v; }
    void print() { cout << x; }
};
int A::x = 10;

int main() {
    A a, b;
    a.set(20);
    b.set(30);
    a.print();
}
```

**ุงููุงุชุฌ ุฅููุ**

1. 20
    
2. 30
    
3. 10
    
4. Error
    

<details>

<summary>ุงุถุบุท ููุง ุนุดุงู ุชุดูู ุงูุฅุฌุงุจุฉ</summary>

ุงูุฅุฌุงุจุฉ ูู <b>30</b>.

ูุฃู x ูุดุชุฑู. a ุฎูุชู 20ุ ูุจุนุฏูู b ุฎูุชู 30. ููุง a ุฌุช ุชุทุจุนุ ููุช ุงููููุฉ ุงูุฃุฎูุฑุฉ (30).

</details>

---


ุฅููู "ุฎูุงุตุฉ ุงูุฎูุงุตุฉ" ูู ุงูู Advanced OOP Actions:

---

### 1. ูุนุจุฉ ุงูุชุญููู (Casting Games) ๐ญ

ุงูู Generalization ูุนูู ุจุชุชุนุงูู ูุน ุงูุงุจู ูุฃูู ุฃุจ (Upcasting).

ุงูู Specialization ูุนูู ุจุชุชุนุงูู ูุน ุงูุฃุจ ูุฃูู ุงุจู (Downcasting).

#### ุฃ) ุงูู Upcasting (ุงูุณูู ุงูุทุงูุน - ุขูู โ)

ุฅูู ุชุดุงูุฑ ุจูุคุดุฑ `Base*` ุนูู ุฃูุจุฌููุช `Derived`.

- **ุงูุญุงูุฉ:** ุจูุญุตู ุถูููุงู (Implicitly). ูุด ูุญุชุงุฌ casting.
    
- **ุงูุฎุทุฑ:** ุจูุญุตู **Slicing** ูู ูุด pointer/reference (ุฒู ูุง ุดุฑุญูุง ูุจู ูุฏู).
    

#### ุจ) ุงูู Downcasting (ุงูุณูู ุงููุงุฒู - ุฎุทุฑ ๐)

ุฅูู ูุนุงู ูุคุดุฑ `Base*` ูุนุงูุฒ ุชุญููู ูู `Derived*` ุนุดุงู ุชุณุชุฎุฏู ุฏุงูุฉ ููุฌูุฏุฉ ุนูุฏ ุงูุงุจู ุจุณ.

ููุง ุนูุฏูุง ููุนูู ูู ุงูู Cast ูู C++:

**1. `static_cast` (ุงููุชููุฑ):**

- ุจูุญูู "ุนุงููุฉ". ูู ุงููุคุดุฑ ูุงู ุจูุดุงูุฑ ุนูู `Base` ุญูููู ูุฃูุช ุญููุชู ูู `Derived`ุ ููุดุงูุฑ ุนูู ููููุฑู ูุด ุจุชุงุนุชู ูุงูุจุฑูุงูุฌ ููุถุฑุจ (Undefined Behavior).
    
- **ุณุฑุนุชู:** ุณุฑูุน ุฌุฏุงู (Compile time).
    

**2. `dynamic_cast` (ุงูุญููู - RTTI):**

- ุฏู ุงูุจุงุดุง. ุจูุดุชุบู ูู ุงูู Runtime ูุชุฃูุฏ ุงูุฃูู: "ูู ุงูุฃูุจุฌููุช ุฏู ูุนูุงู `Derived`ุ".
    
- ูู ุฃููุฉ: ุจูุฑุฌุน ุงูุนููุงู.
    
- ูู ูุฃ: ุจูุฑุฌุน `nullptr` (ูู ูุคุดุฑ) ุฃู ูุฑูู `bad_cast exception` (ูู reference).
    
- **ุดุฑุทู:** ูุงุฒู ุงูููุงุณ ูููู ููู **ุนูู ุงูุฃูู ุฏุงูุฉ ูุงุญุฏุฉ `virtual`** (Polymorphic Class).
    

**ููุฏ ุงูุงูุชุญุงู:**

C++

```
class Base { virtual void f(){} };
class Derived : public Base { public: void specialized() { cout << "Derived only!"; } };

int main() {
    Base* b = new Base();      // ุฃุจ ุญูููู
    
    // Derived* d = static_cast<Derived*>(b); // ุฎุทุฑ! ููุดุชุบู ุจุณ ููุจูุฏู ุงูุฏููุง
    
    Derived* d = dynamic_cast<Derived*>(b);   // ุฃูุงู
    if (d) {
        d->specialized();
    } else {
        cout << "Cast Failed! This is not a Derived object."; // ุฏู ุงููู ููุชุทุจุน
    }
}
```

---

### 2. ุชุฑููุฉ ุงูู Covariant Return Types (ุงูุงุณุชุซูุงุก ุงููุญูุฏ) ๐

ุงููุงุนุฏุฉ ุจุชููู ุฅู ุฏุงูุฉ ุงูู Override ูุงุฒู ูููู ูููุง ููุณ ุงูู Return Type. ุฅูุง ูู ุญุงูุฉ ูุงุญุฏุฉ!

ูู ุงูุฏุงูุฉ ุจุชุฑุฌุน ูุคุดุฑ ุฃู ูุฑุฌุน ููููุงุณ ููุณู.

ูุณููุญ ูู ูู ุงูู Derived ุชุฑุฌุน `Derived*` ุจุฏู `Base*`. ุฏู ุงุณููุง **Covariant Return Type**.

ููู ูููุฏุฉุ

ุนุดุงู ููุง ุชุนูู clone() ููุฃูุจุฌููุชุ ูุด ุชุถุทุฑ ุชุนูู casting ูู ูุฑุฉ.

**ุงููุซุงู:**

C++

```
class Base {
public:
    virtual Base* clone() { return new Base(*this); } // ุจูุฑุฌุน Base*
};

class Derived : public Base {
public:
    // ููุง ุบูุฑูุง ุงูููุน ูู Derived* ูุงููููุจุงููุฑ ูุงูู! ุฏู ุงูู Covariance
    Derived* clone() override { return new Derived(*this); } 
};

int main() {
    Derived d;
    Derived* d2 = d.clone(); // ูุด ูุญุชุงุฌ (Derived*) casting
}
```

---

### 3. ูุนุฑูุฉ ุงูููุน ููุช ุงูุชุดุบูู (RTTI - typeid) ๐ต๏ธโโ๏ธ

ุณุงุนุงุช ุจุชุญุชุงุฌ ุชุนุฑู "ูู ุงููุคุดุฑ ุฏู ุจูุดุงูุฑ ุนูู ููู ุจุฌุฏุ".

ุจูุณุชุฎุฏู typeid.

- **ุดุฑุทูุง:** ูุงุฒู ุงูููุงุณ ูููู Polymorphic (ููู virtual).
    
- **ุงูุชุฑููุฉ:** `typeid` ุจุชุชุฌุงูู ุงูู cv-qualifiers (ูุนูู `const` ู `volatile`).
    

C++

```
#include <typeinfo>

Base* ptr = new Derived();

// 1. ูุญุต ุงูููุน ุงูุซุงุจุช (ูููุคุดุฑ)
cout << typeid(ptr).name();  // ููุทุจุน Base* (P4Base)

// 2. ูุญุต ุงูููุน ุงูุฏููุงูููู (ููุฃูุจุฌููุช)
cout << typeid(*ptr).name(); // ููุทุจุน Derived (7Derived) -> ุนุดุงู ููู virtual
```

---

### 4. ุจูุงุฑูุฒ ุงูุนูุงูุงุช (Association vs Composition) ๐ค

ูู ุงูู OOP Designุ ุงูุณุคุงู ุฏู ุจูุฌู ูุธุฑู ุฃู ููุฏ:

|**ุงูุนูุงูุฉ**|**ุงููุนูู**|**ุงูููุฏ (Memory)**|
|---|---|---|
|**Association**|ุนูุงูุฉ "ูุนุฑูุฉ" (ุจูุณุชุฎุฏูู)|ูุคุดุฑ (ูููู ูููู NULL).|
|**Aggregation**|ุนูุงูุฉ "ุดุฑุงูุฉ" (Has-A ุถุนููุฉ)|ูุคุดุฑ (ุงูุงุจู ุจูุนูุด ูู ุงูุฃุจ ูุงุช).|
|**Composition**|ุนูุงูุฉ "ููู" (Has-A ูููุฉ)|ุฃูุจุฌููุช ูุงูู ุฌูู ุงูููุงุณ (ุงูุงุจู ูููุช ุจููุช ุงูุฃุจ).|

**ููุฏ ููุถุญ ุงููุฑู (ุณุคุงู ุฅูุชุฑููู):**

C++

```
class Engine {};

// Composition (Strong)
class Car {
    Engine e; // Engine is PART of Car
    // ููุง Car ุชุชูุณุญุ e ุชุชูุณุญ ุฃูุชููุงุชูู
};

// Aggregation (Weak)
class Driver {
    Car* c; // Driver HAS A Car (but Car exists independently)
    // ููุง Driver ูุชูุณุญุ ุงูู Car ุจุชูุถู ููุฌูุฏุฉ (ุฅูุง ูู ูู ุงููุณุคูู ุนู ูุณุญูุง)
};
```

---

### 5. ุงูุฒุชููุฉ ุงูุฃุฎูุฑุฉ: Liskov Substitution Principle (LSP) ๐ง

ุฏู ูุจุฏุฃ SOLIDุ ุจุณ ุจูุฌู ุนููู ุฃุณุฆูุฉ ุฎุจูุซุฉ ูู ุงูู Generalization.

**ุงููุงุนุฏุฉ:** "ุฃู ููุงู ุจููุจู `Base` ูุงุฒู ููุจู `Derived` ูู ุบูุฑ ูุง ุงูุจุฑูุงูุฌ ูุถุฑุจ".

ุงููุซุงู ุงูุดููุฑ (ุงููุฑุจุน ูุงููุณุชุทูู):

ูู ุฎููุช Square ููุฑุซ ูู Rectangle.

- ูู ุงููุณุชุทูู: `setWidth` ูุด ุจุชุบูุฑ ุงูู Height.
    
- ูู ุงููุฑุจุน: `setWidth` ูุงุฒู ุชุบูุฑ ุงูู Height ููุงู.
    
- **ุงููุชูุฌุฉ:** ูู ุจุนุช ูุฑุจุน ูุฏุงูุฉ ูุชููุนุง ูุณุชุทููุ ุงูุฏุงูุฉ ูุชุบูุฑ ุงูุนุฑุถ ูุชุชููุน ุงูุทูู ุซุงุจุชุ ูุงูููุฏ ููุญุณุจ ูุณุงุญุฉ ุบูุท.
    
- **ุงูุฏุฑุณ:** "ูุด ูู `Is-A` ูู ุงูุญูููุฉ ุชููุน `Inheritance` ูู ุงูููุฏ". ุงููุฑุงุซุฉ ูุงุฒู ุชุญุชุฑู ุงูุณููู (Behavior) ูุด ุจุณ ุงูุฎุตุงุฆุต.
    

---
ุญุจูุจู ูุง ููุฏุณุฉ! ๐คฉ ุจูุง ุฅูู "ุฏูุณุช" ูู ุงูุชููู ููุณู ุนุงูุฒ ููุงูุ ูุจูู ูุทูุน ุจู **Level ุงููุญุด** ูู ุงูู C++.

ุงููุฑุฉ ุฏู ูุด ููุชููู ูู ุฃุณุงุณูุงุชุ ููุชููู ูู **Modern C++** (C++11/14/17) ูุงูุญุงุฌุงุช ุงููู ุจุชุฎูู ุงูููุฏ ุจุชุงุนู "Professional" ุจุฌุฏุ ูุงููู ุจุชุชุณุฃู ูู ุงูุชุฑููููุงุช ุงูุดุฑูุงุช ุงูุนุงูููุฉ.

ุฅููู **"ุตูุฏูู ุงูุฃุณุฑุงุฑ ุงููุชูุฏูุฉ" (Advanced C++ Gems)**: ๐

---

### 1. ุงูู Smart Pointers (ูุฏุงุนุงู ููู `delete`) ๐๏ธ

ูู ุงูู Modern C++ุ ุงุณุชุฎุฏุงู `new` ู `delete` ุงูุตุฑูุญ ุจูุนุชุจุฑ "Bad Practice" (ุฅูุง ูู ุญุงูุงุช ูุงุฏุฑุฉ). ุงูุจุฏูู ูู ุงูู Smart Pointers ุงููู ุจุชูุธู ููุณูุง ุจููุณูุง.

ุนูุฏูุง 3 ุฃููุงุน ุฑุฆูุณูุฉ (ูุงุฒู ุชุนุฑู ุงููุฑู ุจูููู ุฒู ุงุณูู):

#### ุฃ) `std::unique_ptr` (ุงูููููุฉ ุงูุญุตุฑูุฉ)

- **ุงููุจุฏุฃ:** "ุฃูุง ูุจุณ". ูุคุดุฑ ูุงุญุฏ ุจุณ ูู ุงููู ูููู ุงูุฃูุจุฌููุช.
    
- **ุงูููุฒุฉ:** ููุง ุงูู Pointer ูุฎุฑุฌ ูู ุงูู Scopeุ ุงูุฃูุจุฌููุช ูุชูุณุญ ุฃูุชููุงุชูู.
    
- **ููููุน:** ุงููุณุฎ (`Copy`).
    
- **ูุณููุญ:** ุงูููู (`Move`).
    

C++

```
#include <memory>
class Entity { public: ~Entity() { cout << "Destroyed!\n"; } };

int main() {
    {
        unique_ptr<Entity> entity = make_unique<Entity>(); 
        // entity->doSomething();
        
        // unique_ptr<Entity> e2 = entity; // Error! ููููุน ุงููุณุฎ
        unique_ptr<Entity> e2 = move(entity); // ุตุญ: ูููุช ุงูููููุฉ ูู e2
    } // ููุง e2 ููููุชุ ูุงูู Entity ูุชุชูุณุญ ุฃูุชููุงุชูู
}
```

#### ุจ) `std::shared_ptr` (ุงูููููุฉ ุงููุดุชุฑูุฉ)

- **ุงููุจุฏุฃ:** "ูููุง ุดุฑูุงุก". ูุฐุง ูุคุดุฑ ุจูุดุงูุฑูุง ุนูู ููุณ ุงูุฃูุจุฌููุช.
    
- **ุงูุขููุฉ:** ุจูุณุชุฎุฏู ุญุงุฌุฉ ุงุณููุง **Reference Counting**. ูู ูุง ูุคุดุฑ ุฌุฏูุฏ ูุดุงูุฑุ ุงูุนุฏุงุฏ ูุฒูุฏ. ูู ูุง ูุคุดุฑ ูููุชุ ุงูุนุฏุงุฏ ูููุต. ููุง ุงูุนุฏุงุฏ ููุตู **ุตูุฑ**ุ ุงูุฃูุจุฌููุช ูุชูุณุญ.
    

#### ุฌ) `std::weak_ptr` (ุงููุฑุงูุจ ุงูุตุงูุช)

- **ุงููุดููุฉ:** ูู `A` ุจูุดุงูุฑ ุนูู `B` ุจู `shared_ptr`ุ ู `B` ุจูุดุงูุฑ ุนูู `A` ุจู `shared_ptr`.. ุงูุนุฏุงุฏ ุนูุฑู ูุง ููุจูู ุตูุฑ (Circular Dependency) ูููุญุตู Memory Leak.
    
- **ุงูุญู:** ุงุณุชุฎุฏู `weak_ptr`. ุจูุดุงูุฑ ุจุณ **ูุจูุฒูุฏุด ุงูุนุฏุงุฏ**.
    

---

### 2. ูุงุนุฏุฉ ุงูุฎูุณุฉ (Rule of Five) ๐๏ธ

ุงุญูุง ุฃุฎุฏูุง "Rule of Three" (ุงููุณุฎ). ุงูู Modern C++ ุฒูุฏุช ุงุชููู ููุงู ุฎุงุตูู ุจุงูู **Move Semantics** (ุนุดุงู ุงูุณุฑุนุฉ).

ุชุฎูู ูุนุงู "ููุงุดุฉ" ุนูููุง ุฏุงุชุง ูุชูุฑ:

- **Copy:** ุชุดุชุฑู ููุงุดุฉ ุฌุฏูุฏุฉ ูุชููู ุงูุฏุงุชุง ุจุงูุช ุจุงูุช (ุจุทูุก).
    
- **Move:** ุชุงุฎุฏ ุงูููุงุดุฉ ููุณูุง ูู ุฌูุจู ุชุญุทูุง ูู ุฌูุจู (ุณุฑูุน ุฌุฏุงู - ูุฌุฑุฏ ููู ููููุฉ).
    

ูู ููุงุณู ุจูุชุนุงูู ูุน ููููุฑู ูุจูุฑุฉุ ูุงุฒู ุชุฒูุฏ:

1. **Move Constructor:** `Class(Class&& other)`
    
2. **Move Assignment Operator:** `Class& operator=(Class&& other)`
    

**ุงูุชุฑููุฉ:** ุงูู `&&` ููุง ูุนูุงูุง **R-value Reference** (ุญุงุฌุฉ ูุคูุชุฉ ูููุน ูุณุฑู ููุงุฑุฏูุง).

---

### 3. ุงูุฌุงุณูุณ: ุงููููุฉ `mutable` ๐ต๏ธโโ๏ธ

ุณุคุงู ุฅูุชุฑููู ุฎุจูุซ: "ูู ูููุน ุฃุบูุฑ ูููุฉ ูุชุบูุฑ ุฌูู ุฏุงูุฉ constุ"

ุงูุฅุฌุงุจุฉ ุงูุชูููุฏูุฉ: ูุฃ.

ุงูุฅุฌุงุจุฉ ุงูุจุฑูููุดููุงู: ุฃููุฉุ ูู ุงููุชุบูุฑ ุฏู mutable.

ุจูุณุชุฎุฏููุง ุงูุชูุ

ูู ุนูุฏู ูุชุบูุฑ ูุด ุจูุฃุซุฑ ูู "ุญุงูุฉ" ุงูุฃูุจุฌููุช ุงูููุทููุฉุ ุฒู ุงูู Debugging Counter ุฃู ุงูู Mutex (ุนุดุงู ุงูู Threading).

C++

```
class Database {
    string data;
    mutable int accessCount = 0; // ุฏู ุงูุฌุงุณูุณ
public:
    string getData() const { // ุงูุฏุงูุฉ const
        accessCount++; // ูุณููุญ ุนุดุงู ูู mutable
        return data;
    }
};
```

---

### 4. ุงูู Functors (Object ููุง Functionุ) ๐ค

ุณุงุนุงุช ุจุชุดูู ููุฏ ุฒู ุฏู: obj(10); ูุชุณุชุบุฑุจุ ูู ุฏู ุฃูุจุฌููุช ููุง ุฏุงูุฉุ

ุฏู ุงุณูู Functor (Function Object). ูู ููุงุณ ุนุงุฏู ุจุณ ุนูููุง Override ููู operator().

ููู ูุณุชุฎุฏูู ุจุฏู ุงูุฏุงูุฉ ุงูุนุงุฏูุฉุ

ูุฃูู Stateful (ููุฏุฑ ูุญูุธ ููู ุฌูุงู).

C++

```
class Adder {
    int total = 0;
public:
    int operator()(int val) { // ููุง ุงูุณุฑ
        total += val;
        return total;
    }
};

int main() {
    Adder add;
    cout << add(5) << endl;  // 5
    cout << add(10) << endl; // 15 (ูุณู ูุงูุฑ ุงููููุฉ ุงููุฏููุฉ)
}
```

---

### 5. ุฃุฎุทุฑ Cast ูู ุงูุชุงุฑูุฎ: `const_cast` ๐

ุฏู ุจูุณุชุฎุฏู ุนุดุงู ุชุดูู ูููุฉ const ูู ูุชุบูุฑ!

ุณููุงุฑูู: ุนูุฏู ุฏุงูุฉ ูุฏููุฉ (Legacy Code) ุจุชุงุฎุฏ char* ุจุณ ุฃูุช ูุนุงู const char* ูุนุงุฑู ุฅู ุงูุฏุงูุฉ ูุด ูุชุนุฏู ูููุ ุจุณ ุงููููุจุงููุฑ ูุนุชุฑุถ.

C++

```
void legacyFunc(char* str) { cout << str; }

int main() {
    const char* msg = "Hello";
    // legacyFunc(msg); // Error
    legacyFunc(const_cast<char*>(msg)); // ุดุบุงูุ ุจุณ ุนูู ูุณุคูููุชู!
}
```

**ุชุญุฐูุฑ:** ูู ุงูุฏุงูุฉ ุญุงููุช ุชุนุฏู ูู `msg` ูุนูุงูุ ุงูุจุฑูุงูุฌ ููุนูู **Undefined Behavior** (ูููู ูุถุฑุจ ุฃู ูููู ุบูุท).

---

### 6. ุงูู Lambda Expressions (ุงูููุฏ ุงูุณุฑูุน) ๐

ุจุฏู ูุง ุชูุชุจ ุฏุงูุฉ ูุงููุฉ ุนุดุงู ุชุนูู ุญุงุฌุฉ ุจุณูุทุฉ ูุชุจุนุชูุง ูู `sort` ูุซูุงูุ ูููู ุชูุชุจูุง ูู ุณุทุฑ ูุงุญุฏ (Anonymous Function).

**ุงูุดูู:** `[captures](params) { body }`

C++

```
#include <algorithm>
#include <vector>

int main() {
    vector<int> v = {1, 5, 2, 4};
    int limit = 3;
    
    // ุนุฏ ุงูุฃุฑูุงู ุงูุฃูุจุฑ ูู 3
    // [limit]: ูุนูู ุฎูู ุงูุฏุงูุฉ ุดุงููุฉ ุงููุชุบูุฑ limit ุงููู ุจุฑู
    int count = count_if(v.begin(), v.end(), [limit](int n) {
        return n > limit;
    });
}
```

---
ุทุงููุง ุงูุญูุงุณ ุนุงููุ ูุจูู ูุฏุฎู ุนูู "ุงููุญุด ุงููุงุณุฑ" ูู ุงูู C++: **ุงูู Templates ูุงูู STL**.

ุฏู ุงูุฌุฒุก ุงููู ุจูุฎูู ุงูู C++ ูุบุฉ ูููุฉ ุฌุฏุงู (Generic Programming)ุ ููู ููุณ ุงูููุช ูู ุงููุตุฏุฑ ุฑูู 1 ููู Compilation Errors ุงููู ุจุชุณุฏ ุงูููุณ ูู ุงูุงูุชุญุงูุงุช. ๐

ุฅููู **Level 4: ุณุญุฑ ุงูู Templates ูุฎุจุงูุง ุงูู STL**:

---

### 1. ุงูู Templates (ุงูููุฏ ุงูุฌููุฑ) ๐

ุงูููุฑุฉ ุจุณูุทุฉ: "ุงูุชุจ ุงูููุฏ ูุฑุฉ ูุงุญุฏุฉุ ูุดุบูู ูุน ุฃู Data Type". ุจุณ ุงูุชุฑููุงุช ููุง ูู ุงูุชูุงุตูู.

#### ุฃ) ุฎุฏุนุฉ ุงูุงุณุชูุชุงุฌ (Type Deduction Trap) ๐ต๏ธโโ๏ธ

ุงููููุจุงููุฑ ุฐููุ ุจุณ ุณุงุนุงุช ุจูุณุชุนุจุท.

C++

```
template <typename T>
T add(T a, T b) { return a + b; }

int main() {
    cout << add(5, 10);    // ุดุบุงู (int, int) -> T = int
    cout << add(5.5, 2.1); // ุดุบุงู (double, double) -> T = double
    
    // cout << add(5, 2.5); // Error! โ
    // ุงููููุจุงููุฑ ูุญุชุงุฑ: T int ููุง doubleุ ูู ูุด ุจูุนูู Implicit Cast ููุง.
    
    // ุงูุญู:
    cout << add<double>(5, 2.5); // "ูุง ูููุจุงููุฑุ ุงุนุชุจุฑ ุงูู T double ูุงุนูู Cast ููุจุงูู" โ
}
```

#### ุจ) ุงูุชุฎุตูุต (Template Specialization) ๐ฏ

ุฏู ุจุชูุฌู ูู ุงูุงูุชุญุงู ุนุดุงู ูุดููู ูุงูู ุงูุญุงูุงุช ุงูุฎุงุตุฉ ููุง ูุฃ.

ูุซูุงู: ูู ุนูุฏู Template ุจููุงุฑู ูููุชูู. ูู ุจุนุชูู char* (ูุตูุต C-Style)ุ ุงูููุงุฑูุฉ ุงูุนุงุฏูุฉ a == b ูุชูุงุฑู ุงูุนูุงููู ูุด ุงูุญุฑูู!

ูุงุฒู ุชุนูู "ูุณุฎุฉ ุฎุงุตุฉ" ููู `char*`:

C++

```
// 1. ุงููุงูุจ ุงูุนุงู (General)
template <typename T>
bool isEqual(T a, T b) { return a == b; }

// 2. ุงูุชุฎุตูุต ุงููุงูู (Full Specialization)
template <>
bool isEqual<char*>(char* a, char* b) {
    return strcmp(a, b) == 0; // ุงุณุชุฎุฏู ุฏุงูุฉ ููุงุฑูุฉ ุงููุตูุต
}
```

---

### 2. ุงูู STL Containers (ุฃุฏูุงุช ุงููุญุชุฑููู) ๐งฐ

ูู ุงูุงูุชุฑูููุ ูุด ูููููู "ุนุฑู ูููุชูุฑ". ููุณุฃูู: "ุฅูู ุงููู ุจูุญุตู ูู ุงูููููุฑู ููุง ุงููููุชูุฑ ูุชูููุ".

#### ุฃ) `std::vector` (ุงูุฏููุงูููู) ๐

- **ุงูุณููู:** ูุตูููุฉ ูู ุงูู Heapุ ููุง ุชุชูููุ ุจุชุนูู ุญุฑูุฉ ุฎุจูุซุฉ:
    
    1. ุชุญุฌุฒ ููุงู ุฌุฏูุฏ **ุถุนู ุงูุญุฌู** (Double Capacity).
        
    2. ุชููู ุงูุนูุงุตุฑ ุงููุฏููุฉ ููููุงู ุงูุฌุฏูุฏ.
        
    3. ุชูุณุญ ุงูููุงู ุงููุฏูู.
        
- ุงููุงุฑุซุฉ (Iterator Invalidation):
    
    ูู ูุนุงู ูุคุดุฑ (Pointer/Iterator) ุจูุดุงูุฑ ุนูู ุนูุตุฑ ุฌูู ุงููููุชูุฑุ ูุนููุช push_back ูุงููููุชูุฑ ูุณุน ููุงูู.. ุงููุคุดุฑ ุจุชุงุนู ุจูู ุจูุดุงูุฑ ุนูู ููุงู ููุณูุญ! (Dangling Pointer).
    

#### ุจ) `std::map` vs `std::unordered_map` ๐บ๏ธ

ุงูุณุคุงู ุงูุฃุฒูู: ุงุณุชุฎุฏู ููู ูุงูุชูุ

|**ุงูููุงุฑูุฉ**|**std::map**|**std::unordered_map**|
|---|---|---|
|**ุงูุชุฑุชูุจ**|ูุฑุชุจุฉ ุฏุงุฆูุงู (Sorted).|ุนุดูุงุฆูุฉ (Not Sorted).|
|**ุงูุชุฑููุจ ุงูุฏุงุฎูู**|Balanced BST (Red-Black Tree).|Hash Table.|
|**ุงูุณุฑุนุฉ (Search)**|$O(\log n)$ (ุณุฑูุน ูุซุงุจุช).|$O(1)$ (ุตุงุฑูุฎ.. ุจุณ ูููู ูุจูู $O(n)$ ูู ุญุตู Collisions).|
|**ุงูุงุณุชุฎุฏุงู**|ูู ูุญุชุงุฌ ุชุทุจุน ุงูุฏุงุชุง ูุชุฑุชุจุฉ.|ูู ููู ุงูุณุฑุนุฉ ูุจุณ.|

---

### 3. ุฎุฏุนุฉ ุงูู `operator[]` ูู ุงูู Maps ๐

ุฑูุฒ ูู ุงูููุฏ ุฏู ุนุดุงู ุจูุฌู ูุชูุฑ:

C++

```
map<string, int> grades;
grades["Ahmed"] = 50;

cout << grades["Mona"]; // ุชูุชูุฑ ููุทุจุน ุฅููุ Errorุ Exceptionุ
```

ุงูุฅุฌุงุจุฉ: ููุทุจุน 0.

ุงูุณุจุจ: ุงูู operator[] ูู ุงูู Map ูู ูููุงุด ุงูููุชุงุญ ("Mona")ุ ุจูุฎููู ููุญุทูู ูููุฉ ุงูุชุฑุงุถูุฉ (0 ููู int).

ูู ูุด ุนุงูุฒ ุฏู ูุญุตูุ ุงุณุชุฎุฏู grades.find("Mona").

---

### 4. ุงูู Iterators (ุงููุคุดุฑุงุช ุงูุฐููุฉ) ๐งญ

ุงูู Iterator ูู "ูุคุดุฑ ูุงุจุณ ุจุฏูุฉ". ุจูุฎููู ุชูู ุนูู ุฃู Container ุจููุณ ุงูุทุฑููุฉ.

**ุฃููุงุน ูุงุฒู ุชุนุฑููุง:**

1. `iterator`: ุจููุชุจ ูููุฑุฃ (`*it = 5`).
    
2. `const_iterator`: ุจููุฑุฃ ุจุณ (Read-only). **ุฃุณุฑุน ูุขูู** ูู ูุด ูุชุนุฏู.
    

**ุชุฑููุฉ ุงูุงูุชุญุงู:**

C++

```
vector<int> v = {1, 2, 3};
auto it = v.begin();

v.push_back(4); // ูููู ูุญุตู Reallocation ููุง

cout << *it; // Runtime Error! ุงูู Iterator ุจุงุธ (Invalidated).
```

---

### ุงูุชุญุงู ุณุฑูุน (Level 4) ๐ฅ

**ุณ1: ูุง ูู ูุงุชุฌ ุงูููุฏ ุงูุชุงููุ**

C++

```
template <typename T>
void fun(T x) { static int count = 0; cout << ++count; }

int main() {
    fun<int>(1);
    fun<int>(2);
    fun<double>(1.1);
}
```

- A) 123
    
- B) 121
    
- C) 111
    
- D) Compile Error
    

**ุณ2: ุฃู ูู ุงูุนูููุงุช ุงูุชุงููุฉ ุชูุบู (Invalidate) ูุคุดุฑุงุช ุงูู `list`ุ**

- A) `push_back`
    
- B) `erase` (ููุนูุตุฑ ุงูููุณูุญ ููุท)
    
- C) `insert`
    
- D) ูุง ุดูุก ููุง ุณุจู (ุงูู list ูุคุดุฑุงุชูุง ุซุงุจุชุฉ).
    

**ุณ3: ููู ุจููุถู `emplace_back` ุนู `push_back` ูู ุงููููุชูุฑุ**

- A) ุฃุณุฑุน ูุฃููุง ุจุชุจูู ุงูุฃูุจุฌููุช ูู ููุงูู (ุจุฏูู ูุณุฎ).
    
- B) ุงุณููุง ุฃุดูู.
    
- C) ุจุชุนูู sorting ุฃูุชููุงุชูู.
    

---

### ุงูุญููู:

1. **ุงูุฅุฌุงุจุฉ (B): 121**
    
    - **ุงูุณุจุจ:** ุงูู Templates ุจุชุนูู **ูุณุฎุฉ ูููุตูุฉ ูู ุงูููุฏ** ููู ููุน.
        
    - `fun<int>` ูููุง `static count` ุฎุงุต ุจููุง (ุฒุงุฏ ูุฑุชูู: 1ุ 2).
        
    - `fun<double>` ุฏู ุฏุงูุฉ ุชุงููุฉ ุฎุงูุต ุจู `static count` ุฌุฏูุฏ (ุจุฏุฃ ูู 0 ูุจูู 1).
        
2. **ุงูุฅุฌุงุจุฉ (B): erase**
    
    - ุงูู `std::list` (Linked List) ูุด ุจุชููู ุนูุงุตุฑูุง ูู ุงูููููุฑู ุฃุจุฏุงูุ ูุงููุคุดุฑุงุช ุจุชูุถู ุณูููุฉุ ูุง ุนุฏุง ุทุจุนุงู ุงูุนูุตุฑ ุงููู ุงุชูุณุญ. ุนูุณ ุงูู `vector`.
        
3. **ุงูุฅุฌุงุจุฉ (A):**
    
    - `push_back(Obj)`: ุจุชุนูู ุฃูุจุฌููุช ูุคูุช ูุชูุณุฎู ุฌูู ุงููููุชูุฑ.
        
    - `emplace_back(args)`: ุจุชุจูู ุงูุฃูุจุฌููุช ุฌูู ุงููููุชูุฑ ุนูุทูู. (ุชูููุฑ ูู ุงูุฃุฏุงุก).
        

---
